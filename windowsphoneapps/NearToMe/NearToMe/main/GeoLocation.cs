using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

using NearToMe.GeocodeService;
using Windows.Devices.Geolocation;
namespace NearToMe
{
    partial class main
    {


        Geolocator geolocator = new Geolocator();
        
        private async Task<string>  ReverseGeocodePoint()
        {
            GeocodeService.ReverseGeocodeRequest reverseGeocodeRequest = new GeocodeService.ReverseGeocodeRequest();



            // Set the credentials using a valid Bing Maps key
            reverseGeocodeRequest.Credentials = new GeocodeService.Credentials();
            reverseGeocodeRequest.Credentials.ApplicationId = Ressources.BingMapkey;

            
            // Set the point to use to find a matching address
            GeocodeService.Location point = new GeocodeService.Location();
            point.Latitude = 47.608;
            point.Longitude = -122.337;

            reverseGeocodeRequest.Location = point;

            // Make the reverse geocode request
            GeocodeService.GeocodeServiceClient geocodeService =new GeocodeService.GeocodeServiceClient(
            
            GeocodeService.GeocodeResponse geocodeResponse =await geocodeService.ReverseGeocodeAsync(reverseGeocodeRequest);

            string Results = geocodeResponse.Results[0].DisplayName;//*/

            Town.Text = Results;


            return "";
        }


        private async void InitGeolocation(){
            await ReverseGeocodePoint();
        }
        

    }
}

