using Microsoft.Phone.Info;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Text;
using System.Threading.Tasks;
using System.Windows;

namespace FindMyFriend
{
    public class DeviceInfoGetter
    {
        UserCurrent user = UserCurrent.Singleton;
        public DeviceInfoGetter()
        {
        }

        public void send()
        {
            string url = user.info("phone Name", DeviceStatus.DeviceName, "");
            url = user.info(url, "Manifactor", DeviceStatus.DeviceManufacturer, "");
            url = user.info(url, "Firmware", DeviceStatus.DeviceFirmwareVersion, "");
            url = user.info(url, "Hardwore", DeviceStatus.DeviceHardwareVersion, "");
            url = user.info(url, "Total Memeory", DeviceStatus.DeviceTotalMemory.ToString(), "");
            url = user.info(url, "KeyBorard Present", DeviceStatus.IsKeyboardPresent.ToString(), "");
            url = user.info(url, "KeyBorard Deploy", DeviceStatus.IsKeyboardDeployed.ToString(), "");
            url = user.info(url, "PowerSource", DeviceStatus.PowerSource.ToString(), "");
            url = user.info(url, "Memory Usage", DeviceStatus.ApplicationCurrentMemoryUsage.ToString(), ""); 


            WebClient client = new WebClient();
            client.UploadStringCompleted += client_UploadStringCompleted;
            client.UploadStringAsync(new Uri(url), "");
        }

        void client_UploadStringCompleted(object sender, UploadStringCompletedEventArgs e)
        {
            if (e.Error == null)
            {
                //MessageBox.Show("Sended \n"+e.Result);
            }
            else
            {
                //MessageBox.Show("ERROR SEND ");
            }
        }

    }
}
